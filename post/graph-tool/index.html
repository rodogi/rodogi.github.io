<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>
        
            Create a network with graph-tool and pandas - Rodrigo Dorantes Gilardi
        
    </title>
    
    
    <link rel="stylesheet" href="/scss/custom.css">
</head>
  <body>
    <nav>
    <div class="container">
      
        <a href="/">home</a>
      
        <a href="/research">research</a>
      
        <a href="/teaching">teaching</a>
      
        <a href="/post">blog</a>
      
        <a href="/cv">cv</a>
      
    </div>
  </nav>
    <main>
      
<div class="container">
    <article class="research-article">
        <div class="article-header">
            <h1>Create a network with graph-tool and pandas</h1>
            <div class="description">June 26, 2019 · Rodrigo Dorantes-Gilardi</div>
        </div>
        <div class="article-content">
            <h2 id="graph-tool">graph-tool</h2>
<p><a href="https://graph-tool.skewed.de/" 
  
   target="_blank" rel="noreferrer noopener" 
>graph-tool</a> is a Python package for network analysis backed by C++ and the Boost Graph Library. Compared to the more popular <code>networkx</code>, it offers significantly better performance for large networks.</p>
<p>Some of its standout features:</p>
<ul>
<li><strong>Filters and views</strong> for extracting subgraphs without copying data</li>
<li><strong>Interactive drawing</strong> and beautiful graph layouts</li>
<li><strong>Fast topological algorithms</strong></li>
</ul>
<p>The main downside: documentation could use more worked examples—which is partly why I’m writing this.</p>
<h2 id="pandas--graph-tool">Pandas + graph-tool</h2>
<p>Network analysis often involves inspecting structural parameters (degree statistics, centrality) or working with node/edge attributes in tabular form. Pandas makes this natural.</p>
<p>Suppose we have an edge list as a CSV:</p>
<table>
  <thead>
      <tr>
          <th>node 1</th>
          <th>node 2</th>
          <th>color</th>
          <th>weight</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>a</td>
          <td>b</td>
          <td>red</td>
          <td>2</td>
      </tr>
      <tr>
          <td>a</td>
          <td>c</td>
          <td>black</td>
          <td>5</td>
      </tr>
      <tr>
          <td>b</td>
          <td>c</td>
          <td>red</td>
          <td>1</td>
      </tr>
  </tbody>
</table>
<p>Here’s how to read it into a graph-tool <code>Graph</code> with edge properties:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> graph_tool.all <span style="color:#66d9ef">as</span> gt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;table.csv&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> gt<span style="color:#f92672">.</span>Graph()
</span></span><span style="display:flex;"><span>weight <span style="color:#f92672">=</span> g<span style="color:#f92672">.</span>new_edge_property(<span style="color:#e6db74">&#34;int&#34;</span>)
</span></span><span style="display:flex;"><span>color <span style="color:#f92672">=</span> g<span style="color:#f92672">.</span>new_edge_property(<span style="color:#e6db74">&#34;string&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>edgelist <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>values
</span></span><span style="display:flex;"><span>node_id <span style="color:#f92672">=</span> g<span style="color:#f92672">.</span>add_edge_list(edgelist, hashed<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, eprops<span style="color:#f92672">=</span>[color, weight])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> node <span style="color:#f92672">in</span> range(g<span style="color:#f92672">.</span>num_vertices()):
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Node </span><span style="color:#e6db74">{</span>node<span style="color:#e6db74">}</span><span style="color:#e6db74"> has id: </span><span style="color:#e6db74">{</span>node_id[node]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p>Before saving, register the properties as internal property maps so they persist:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>g<span style="color:#f92672">.</span>vertex_properties[<span style="color:#e6db74">&#34;node_id&#34;</span>] <span style="color:#f92672">=</span> node_id
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">.</span>edge_properties[<span style="color:#e6db74">&#34;color&#34;</span>] <span style="color:#f92672">=</span> color
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">.</span>edge_properties[<span style="color:#e6db74">&#34;weight&#34;</span>] <span style="color:#f92672">=</span> weight
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">.</span>save(<span style="color:#e6db74">&#34;my_network.graphml&#34;</span>)
</span></span></code></pre></div>
        </div>
        <div class="article-nav">
            
                <a href="/post/pandas_network/">← Using pandas for network analysis</a>
            
            
                <a href="/post/el_pais/">What cities appear most often in El País articles? →</a>
            
        </div>
    </article>
</div>

    </main>
    <footer>
    <div class="container">
      <p>© 2026 Rodrigo Dorantes Gilardi. All rights reserved.</p>
    </div>
  </footer>
  </body>
</html>