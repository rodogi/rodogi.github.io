<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>
        
            Folding Python code in Emacs - Rodrigo Dorantes Gilardi
        
    </title>
    
    
    <link rel="stylesheet" href="/scss/custom.css">
</head>
  <body>
    <nav>
    <div class="container">
      
        <a href="/">home</a>
      
        <a href="/research">research</a>
      
        <a href="/teaching">teaching</a>
      
        <a href="/post">blog</a>
      
        <a href="/cv">cv</a>
      
    </div>
  </nav>
    <main>
      
<div class="container">
    <article class="research-article">
        <div class="article-header">
            <h1>Folding Python code in Emacs</h1>
            <div class="description">March 19, 2018 · Rodrigo Dorantes-Gilardi</div>
        </div>
        <div class="article-content">
            <h2 id="motivation">Motivation</h2>
<p>I use Python daily and Emacs as my editor. The <code>vimish-folding</code> package lets me define and persist custom folds, but unlike Vim, it doesn’t fold functions and classes automatically.</p>
<p>Here’s a small function that fills that gap: it folds every top-level code block in a Python buffer.</p>
<h2 id="the-function">The function</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(defun fold-python-blocks ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Fold all top-level code blocks in a Python buffer.&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">forward-word</span>)
</span></span><span style="display:flex;"><span>  (setq p (<span style="color:#a6e22e">point</span>))
</span></span><span style="display:flex;"><span>  (while (<span style="color:#a6e22e">forward-word</span>)
</span></span><span style="display:flex;"><span>    (backward-word)
</span></span><span style="display:flex;"><span>    (setq col (<span style="color:#a6e22e">current-column</span>))
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">forward-word</span>)
</span></span><span style="display:flex;"><span>    (if (<span style="color:#a6e22e">=</span> col <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        (progn
</span></span><span style="display:flex;"><span>          (setq p1 (<span style="color:#a6e22e">car</span> (bounds-of-thing-at-point \=<span style="color:#e6db74">&#39;word</span>)))
</span></span><span style="display:flex;"><span>          (vimish-fold p p1)
</span></span><span style="display:flex;"><span>          (setq p p1)
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">goto-char</span> p)
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">forward-word</span>))))
</span></span><span style="display:flex;"><span>  (vimish-fold p (<span style="color:#a6e22e">buffer-size</span>))
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">goto-char</span> <span style="color:#ae81ff">1</span>))
</span></span></code></pre></div><p>Add this to your <code>init.el</code>, then invoke it with <code>M-x fold-python-blocks</code>. It will fold each top-level block, including code after <code>if __name__ == &quot;__main__&quot;:</code>.</p>

        </div>
        <div class="article-nav">
            
                <span></span>
            
            
                <a href="/post/networkx_arrows/">Adding arrows to networkx →</a>
            
        </div>
    </article>
</div>

    </main>
    <footer>
    <div class="container">
      <p>© 2026 Rodrigo Dorantes Gilardi. All rights reserved.</p>
    </div>
  </footer>
  </body>
</html>